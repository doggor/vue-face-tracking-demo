webpackJsonp([1],{102:function(e,t,r){e.exports=r.p+"static/img/brand-logo.48cf13d.png"},103:function(e,t,r){function o(e){r(93)}var n=r(11)(r(54),r(107),o,null,null);e.exports=n.exports},104:function(e,t,r){function o(e){r(96)}var n=r(11)(r(55),r(110),o,null,null);e.exports=n.exports},105:function(e,t,r){function o(e){r(97)}var n=r(11)(r(56),r(111),o,null,null);e.exports=n.exports},106:function(e,t,r){function o(e){r(95)}var n=r(11)(r(57),r(109),o,null,null);e.exports=n.exports},107:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("transition",{attrs:{name:"fade"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.value,expression:"value"}],attrs:{id:"helpModal"},on:{click:e.close}},[r("div",{staticClass:"modal-box"},[r("h2",[e._v("About")]),e._v(" "),r("p",[e._v("\n                FaceUP is a simple facial features tracker that demonstrates the use of cutting-edge web technologies.\n            ")]),e._v(" "),r("p",[e._v("\n                It currently works only on the following browsers:\n                "),r("ul",[r("li",[e._v("Chrome 53+")]),e._v(" "),r("li",[e._v("Firefox 38+")]),e._v(" "),r("li",[e._v("Opera 40+")]),e._v(" "),r("li",[e._v("Android Browser 53+")]),e._v(" "),r("li",[e._v("Chrome for Android 53+")]),e._v(" "),r("li",[e._v("Firefox Mobile 36+")]),e._v(" "),r("li",[e._v("Opera Mobile 40+")])])]),e._v(" "),r("p",[e._v("Due to the limitations of vary hardwares and softwares, you are suggested to try it on Chrome for better performance.")])])])])},staticRenderFns:[]}},108:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("TheHeader"),e._v(" "),r("main",[r("router-view")],1)],1)},staticRenderFns:[]}},109:function(e,t,r){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("header",[e._m(0),e._v(" "),r("button",{staticClass:"help-btn",on:{click:function(t){e.showHelp=!0}}},[r("span",[e._v("?")])]),e._v(" "),r("HelpModal",{model:{value:e.showHelp,callback:function(t){e.showHelp=t},expression:"showHelp"}})],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("a",{attrs:{href:"https://www.breakloop.cc/"}},[o("img",{attrs:{src:r(102),alt:"Break Loop"}})])}]}},110:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"home"}},[r("Mirror")],1)},staticRenderFns:[]}},111:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{ref:"mirror",attrs:{id:"mirror"}},[r("div",{style:e.videoContainerStyle,attrs:{id:"videoContainer"}},[r("video",{ref:"videoEle",style:e.videoStyle,attrs:{id:"videoEle",width:this.camMeta.width,height:this.camMeta.height}}),e._v(" "),r("canvas",{ref:"canvasEle",style:e.videoStyle,attrs:{id:"canvasEle",width:this.camMeta.width,height:this.camMeta.height}}),e._v(" "),e.deviceNotSupport||e.faceDetected?e._e():r("div",{attrs:{id:"scanningLiner"}}),e._v(" "),r("transition",{attrs:{name:"fade"}},[e.errorMessage?r("div",{staticClass:"message-box"},[r("span",{staticClass:"message",attrs:{id:"deviceUnsupportMessage"}},[e._v(e._s(e.errorMessage))])]):e._e()])],1),e._v(" "),r("div",{attrs:{id:"controlContainer"}},[r("div",{staticClass:"control float-right"},[r("button",{attrs:{id:"resetTrackBtn"},on:{click:e.resetTrack}},[e._v("Re-Scan")])]),e._v(" "),r("div",{staticClass:"control"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.shouldDrawModelLines,expression:"shouldDrawModelLines"}],attrs:{type:"checkbox",id:"faceLine"},domProps:{checked:Array.isArray(e.shouldDrawModelLines)?e._i(e.shouldDrawModelLines,null)>-1:e.shouldDrawModelLines},on:{change:function(t){var r=e.shouldDrawModelLines,o=t.target,n=!!o.checked;if(Array.isArray(r)){var a=e._i(r,null);o.checked?a<0&&(e.shouldDrawModelLines=r.concat([null])):a>-1&&(e.shouldDrawModelLines=r.slice(0,a).concat(r.slice(a+1)))}else e.shouldDrawModelLines=n}}}),e._v(" "),r("label",{attrs:{for:"faceLine"}},[e._v("Face Lines")])]),e._v(" "),r("div",{staticClass:"control"},[r("label",{attrs:{for:"lipsColor"}},[e._v("Lips Color: ")]),e._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:e.lipsColor,expression:"lipsColor"}],attrs:{id:"lipsColor"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.lipsColor=t.target.multiple?r:r[0]}}},[r("option",{attrs:{value:"rgba(255, 0, 0, .4)"}},[e._v("Red")]),e._v(" "),r("option",{attrs:{value:"rgba(0, 255, 0, .4)"}},[e._v("Green")]),e._v(" "),r("option",{attrs:{value:"rgba(0, 0, 255, .4)"}},[e._v("Blue")]),e._v(" "),r("option",{attrs:{value:"rgba(127, 0, 127, .4)"}},[e._v("Purple")])])]),e._v(" "),r("div",{staticClass:"control"},[r("label",{attrs:{for:"browsColor"}},[e._v("Brows Color: ")]),e._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:e.browsColor,expression:"browsColor"}],attrs:{id:"browsColor"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.browsColor=t.target.multiple?r:r[0]}}},[r("option",{attrs:{value:"rgba(127, 0, 0, .5)"}},[e._v("Red")]),e._v(" "),r("option",{attrs:{value:"rgba(0, 127, 0, .4)"}},[e._v("Green")]),e._v(" "),r("option",{attrs:{value:"rgba(0, 0, 127, .4)"}},[e._v("Blue")]),e._v(" "),r("option",{attrs:{value:"rgba(127, 0, 127, .6)"}},[e._v("Purple")])])])])])},staticRenderFns:[]}},46:function(e,t,r){"use strict";var o=r(26),n=r(112),a=r(104),i=r.n(a);o.a.use(n.a),t.a=new n.a({routes:[{path:"/",name:"HomePage",component:i.a}]})},47:function(e,t,r){function o(e){r(94)}var n=r(11)(r(53),r(108),o,null,null);e.exports=n.exports},48:function(e,t,r){"use strict";function o(e,t,r){e.beginPath(),e.moveTo(t[19][0]-10,t[19][1]-4),e.bezierCurveTo(t[20][0],t[20][1]+6,t[21][0],t[21][1]+6,t[22][0]+4,t[22][1]+4),e.arcTo(t[22][0]+4,t[22][1]-6,t[22][0]-6,t[22][1]-6,12),e.bezierCurveTo(t[21][0],t[21][1]-6,t[20][0],t[20][1]-8,t[19][0]-10,t[19][1]-4),e.fillStyle=r,e.fill()}t.a=o},49:function(e,t,r){"use strict";function o(e,t,r){e.beginPath(),e.moveTo.apply(e,a()(t[s])),i.forEach(function(r){return e.lineTo.apply(e,a()(t[r]))}),e.fillStyle=r,e.fill()}t.a=o;var n=r(28),a=r.n(n),i=[56,57,58,50,51,52,53,54,55,44],s=44},50:function(e,t,r){"use strict";function o(e,t,r){e.beginPath(),e.moveTo(t[15][0]+10,t[15][1]-4),e.bezierCurveTo(t[16][0],t[16][1]+6,t[17][0],t[17][1]+6,t[18][0]-4,t[18][1]+4),e.arcTo(t[18][0]-4,t[18][1]-6,t[18][0]+6,t[18][1]-6,12),e.bezierCurveTo(t[17][0],t[17][1]-6,t[16][0],t[16][1]-8,t[15][0]+10,t[15][1]-4),e.fillStyle=r,e.fill()}t.a=o},51:function(e,t,r){"use strict";function o(e,t,r){e.beginPath(),e.moveTo.apply(e,a()(t[s])),i.forEach(function(r){return e.lineTo.apply(e,a()(t[r]))}),e.fillStyle=r,e.fill()}t.a=o;var n=r(28),a=r.n(n),i=[45,46,47,48,49,50,59,60,61,44],s=44},52:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(26),n=r(47),a=r.n(n),i=r(46);o.a.config.productionTip=!1,new o.a({el:"#app",router:i.a,template:"<App/>",components:{App:a.a}})},53:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(106),n=r.n(o);t.default={name:"app",components:{TheHeader:n.a}}},54:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"helpModal",props:{value:{type:Boolean,default:!1}},methods:{close:function(){this.$emit("input",!1)}}}},55:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(105),n=r.n(o);t.default={name:"HomePage",components:{Mirror:n.a}}},56:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(60),n=r.n(o),a=r(27),i=r.n(a),s=r(59),c=r.n(s),l=r(51),u=r(49),d=r(48),v=r(50),f=window.clm.tracker;t.default={name:"Mirror",data:function(){return{camMeta:{width:Math.min(window.innerWidth,500),height:Math.min(window.innerHeight,500)},video:{preferWidth:Math.min(window.innerWidth,500),preferHeight:Math.min(window.innerHeight,500)},shouldDrawModelLines:!1,lipsColor:"rgba(0, 0, 255, .4)",browsColor:"rgba(0, 0, 127, .4)",errorMessage:null,deviceNotSupport:!1,cameraAccessDenied:!1,faceDetected:!1,ctracker:null}},computed:{videoContainerStyle:function(){return{width:this.video.preferWidth+"px",height:this.video.preferHeight+"px"}},videoStyle:function(){return{transform:"translateX(-"+Math.max((this.camMeta.width-this.video.preferWidth)/2,0)+"px) rotateY(180deg)"}}},methods:{isDeviceSupport:function(){return!(!navigator||!navigator.mediaDevices)||(this.deviceNotSupport=!0,!1)},startVideo:function(){var e=this;return c()(n.a.mark(function t(){var r,o;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.$refs.videoEle,t.next=3,navigator.mediaDevices.getUserMedia({video:{facingMode:"user",frameRate:{ideal:15}}});case 3:return o=t.sent,r.srcObject=o,t.abrupt("return",new i.a(function(t){r.onloadedmetadata=function(){var n=o.getVideoTracks();if(n.length>0){var a=n[0].getSettings(),i=a.width,s=a.height;e.camMeta.width=i,e.camMeta.height=s,e.video.preferWidth=Math.min(i,window.innerWidth,500),e.video.preferHeight=Math.min(s,window.innerHeight,500)}r.play(),t()}}));case 6:case"end":return t.stop()}},t,e)}))()},stopVideo:function(){this.$refs.videoEle.srcObject&&(this.$refs.videoEle.srcObject.getTracks().forEach(function(e){return e.stop()}),this.$refs.videoEle.srcObject=null)},startTrack:function(){var e=this,t=this.$refs.videoEle,o=this.$refs.canvasEle,n=o.getContext("2d");this.ctracker=new f({scoreThreshold:.5}),this.ctracker.init(),this.ctracker.start(t);!function t(){if(e.ctracker){n.clearRect(0,0,e.camMeta.width,e.camMeta.height);var a=e.ctracker.getCurrentPosition();a?(r.i(l.a)(n,a,e.lipsColor),r.i(u.a)(n,a,e.lipsColor),r.i(d.a)(n,a,e.browsColor),r.i(v.a)(n,a,e.browsColor),e.shouldDrawModelLines&&e.ctracker.draw(o),e.faceDetected=!0):e.faceDetected=!1,requestAnimationFrame(t)}}()},resetTrack:function(){var e=this;return c()(n.a.mark(function t(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isDeviceSupport()||!e.ctracker){t.next=6;break}return e.stopTrack(),e.stopVideo(),t.next=5,e.startVideo();case 5:e.startTrack();case 6:case"end":return t.stop()}},t,e)}))()},stopTrack:function(){this.ctracker&&(this.ctracker.stop(),this.ctracker=null,this.faceDetected=!1)},handleCameraAccessError:function(e){console.log(e),this.cameraAccessDenied=!0,this.showErrorMsg("Camera Access Denied.")},showErrorMsg:function(e){this.errorMessage=e}},mounted:function(){var e=this;return c()(n.a.mark(function t(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isDeviceSupport()){t.next=12;break}return t.prev=1,t.next=4,e.startVideo();case 4:e.startTrack(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),e.handleCameraAccessError(t.t0);case 10:t.next=13;break;case 12:e.showErrorMsg("This browser is not modern enough. Please try latest Chrome or Firefox.");case 13:case"end":return t.stop()}},t,e,[[1,7]])}))()},beforeDestroy:function(){this.stopTrack(),this.stopVideo()}}},57:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(103),n=r.n(o);t.default={name:"TheHeader",components:{HelpModal:n.a},data:function(){return{showHelp:!1}}}},93:function(e,t){},94:function(e,t){},95:function(e,t){},96:function(e,t){},97:function(e,t){}},[52]);
//# sourceMappingURL=app.1f1c9162632f90bcb0f1.js.map